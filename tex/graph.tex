\documentclass[tikz]{standalone}
\usepackage{pgfplots}
\tikzset{
  jumpdot/.style={mark=*,solid},
  excl/.append style={jumpdot,fill=white},
  incl/.append style={jumpdot,fill=black},
}
\usetikzlibrary{arrows.meta}
\pgfplotsset{compat=1.11}
\begin{document}
\begin{tikzpicture}
\begin{axis}[
  axis lines=middle,
  grid=major,
  xmin=-5,
  xmax=5,
  ymin=-5,
  ymax=5,
  xlabel=$x$,
  ylabel=$y$,
  xtick={-4,-3,...,4},
  ytick={-4,-3,...,4},
  %xticklabel = \empty,
  %yticklabel = \empty,
  tick style={very thick},
  %restrict y to domain = -2:30,
  legend style={at={(rel axis cs:0,1)},anchor=north west,draw=none,inner sep=0pt, fill = white}
]

\addplot[blue,very thick,domain=-5:-1,samples=100] gnuplot {-2*(x+1)+2};
\addplot[blue,very thick,domain=-1:2,samples=100] gnuplot {2};
\addplot[blue,very thick,domain=2:4,samples=100] gnuplot {sqrt(1 - (x - 3)^2) + 3};
\addplot[blue,very thick,domain=4:5,samples=100] gnuplot {3};
\addplot +[blue,very thick,mark=none] coordinates {(2, 2) (2, 3)};
\draw[fill=red!30] (-2,2) -- (-2,4) -- (-1,2) node[] at (-1.6,2.5) {\Large 1};
\draw[fill=orange!30] (-2,0) rectangle (2,2) node[] at (0,1) {\Huge 2};
\draw[fill=green!30] (2,0) rectangle (5,3) node[] at (3.5,1.5) {\Huge 4};
\draw[fill=violet!30] (4,3) arc (0:180:1) node at (3,3.5) {\Large 3};

%\draw[green,very thick] (1,0) -- (1,2);
%\draw[green,very thick] (3,0) -- (3,2);
%\draw [dashed] (2,-10) -- (2,40);
%\addplot[incl, draw=blue] coordinates {(3,3)};
%\addplot[excl, draw=blue] coordinates {(-2,0)};


\addlegendentry{$f(x)$};

\end{axis};
\end{tikzpicture}

\end{document}